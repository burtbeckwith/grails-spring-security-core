<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>6. Configuration</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    Much of the Spring Security configuration is user-configurable. The configuration has sensible default values, but each application has special needs. Default values are in the plugin's <code>grails-app/conf/DefaultSecurityConfig.groovy</code> file and you can put application-specific values are in <code>grails-app/conf/Config.groovy</code>. The two configurations will be merged with application values overriding the defaults.<p class="paragraph"/><blockquote class="note">
All of these property overrides must be specified in <code>Config.groovy</code> using the <code>grails.plugins.springsecurity</code> suffix, for example
<div class="code"><pre>grails.plugins.springsecurity.userLookup.userDomainClassName =
     'com.mycompany.myapp.User'</pre></div>
</blockquote><p class="paragraph"/><h4>Properties that are most likely to be overridden are the <code>User</code> and <code>Role</code> (and <code>Requestmap</code> if using the database to store mappings) class and field names:</h4><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>userLookup.userDomainClassName</td><td>'Person'</td><td>User class name</td></tr><tr class="table-even"><td>userLookup.usernamePropertyName</td><td>'username'</td><td>User class username field</td></tr><tr class="table-odd"><td>userLookup.passwordPropertyName</td><td>'password'</td><td>User class password field</td></tr><tr class="table-even"><td>userLookup.authoritiesPropertyName</td><td>'authorities'</td><td>User class role collection field</td></tr><tr class="table-odd"><td>userLookup.enabledPropertyName</td><td>'enabled'</td><td>User class enabled field</td></tr><tr class="table-even"><td>userLookup.accountExpiredPropertyName</td><td>'accountExpired'</td><td>User class account expired field</td></tr><tr class="table-odd"><td>userLookup.accountLockedPropertyName</td><td>'accountLocked'</td><td>User class account locked field</td></tr><tr class="table-even"><td>userLookup.passwordExpiredPropertyName</td><td>'passwordExpired'</td><td>User class password expired field</td></tr><tr class="table-odd"><td>userLookup.authorityJoinClassName</td><td>'PersonAuthority'</td><td>User/Role many-many join class name</td></tr><tr class="table-even"><td>authority.className</td><td>'Authority'</td><td>Role class name</td></tr><tr class="table-odd"><td>authority.nameField</td><td>'authority'</td><td>Role class role name field</td></tr><tr class="table-even"><td>requestMap.className</td><td>'Requestmap'</td><td>Requestmap class name</td></tr><tr class="table-odd"><td>requestMap.urlField</td><td>'url'</td><td>Requestmap class URL pattern field</td></tr><tr class="table-even"><td>requestMap.configAttributeField</td><td>'configAttribute'</td><td>Requestmap class role/token field</td></tr></table><p class="paragraph"/><h4>To customize the login error messages that are displayed for the various error conditions:</h4><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>errors.login.fail</td><td>"Sorry, we were not able to find a user with that username and password."</td><td>message displayed when authentication is successful because of missing user or bad password</td></tr><tr class="table-even"><td>errors.login.disabled</td><td>"Sorry, your account is disabled."</td><td>message displayed when authentication is successful but user is not enabled</td></tr></table><p class="paragraph"/><h4>rememberMeServices bean (cookie management)</h4><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>rememberMe.cookieName</td><td>'grails_remember_me'</td><td>remember-me cookie name - should be unique per application</td></tr><tr class="table-even"><td>rememberMe.alwaysRemember</td><td><code>false</code></td><td>create a remember-me cookie even if there's no checkbox on the form if <code>true</code></td></tr><tr class="table-odd"><td>rememberMe.tokenValiditySeconds</td><td>1209600 (14 days)</td><td>max age of the cookie in seconds</td></tr><tr class="table-even"><td>rememberMe.parameter</td><td>'_spring_security_remember_me'</td><td>Login form remember-me checkbox name</td></tr><tr class="table-odd"><td>rememberMe.key</td><td>'grailsRocks'</td><td>a value used to encode cookies - should be unique per application</td></tr><tr class="table-even"><td>rememberMe.persistent</td><td><code>false</code></td><td>if <code>true</code> store persistent login information in the database</td></tr><tr class="table-odd"><td>rememberMe.persistentToken.domainClassName</td><td>'PersistentLogin'</td><td>domain class used to manage persistent logins</td></tr><tr class="table-even"><td>rememberMe.persistentToken.seriesLength</td><td>16</td><td>the number of characters in the cookie's <code>series</code> attribute</td></tr><tr class="table-odd"><td>rememberMe.persistentToken.tokenLength</td><td>16</td><td>the number of characters in the cookie's <code>token</code> attribute</td></tr><tr class="table-even"><td>atr.rememberMeClass</td><td><a href="http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/authentication/RememberMeAuthenticationToken.html" target="blank">RememberMeAuthenticationToken</a></td><td>remember-me authentication class</td></tr></table><p class="paragraph"/><h4>URL attributes</h4><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>apf.filterProcessesUrl</td><td>'/j_spring_security_check'</td><td>login form post URL, intercepted by Spring Security filter</td></tr><tr class="table-even"><td>apf.usernameParameter</td><td>'j_username'</td><td>login form username parameter</td></tr><tr class="table-odd"><td>apf.passwordParameter</td><td>'j_password'</td><td>login form password parameter</td></tr><tr class="table-even"><td>apf.allowSessionCreation</td><td><code>true</code></td><td>whether or not to allow authentication to create an HTTP session</td></tr><tr class="table-odd"><td>apf.postOnly</td><td><code>true</code></td><td>whether to only allow POST login requests</td></tr><tr class="table-even"><td>failureHandler.defaultFailureUrl</td><td>'/login/authfail?login_error=1'</td><td>redirect URL for failed logins</td></tr><tr class="table-odd"><td>failureHandler.ajaxAuthFailUrl</td><td>'/login/authfail?ajax=true'</td><td>redirect URL for failed Ajax logins</td></tr><tr class="table-even"><td>failureHandler.exceptionMappings</td><td>none</td><td>a map of exception class name (subclass of <a href="http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/AuthenticationException.html" target="blank">AuthenticationException</a>) to URL to redirect to for that exception type after authentication failure</td></tr><tr class="table-odd"><td>failureHandler.useForward</td><td><code>false</code></td><td>whether to render the error page (<code>true</code>) or redirect (<code>false</code>)</td></tr><tr class="table-even"><td>successHandler.defaultTargetUrl</td><td>'/'</td><td>default post-login URL if there's no saved request that triggered the login</td></tr><tr class="table-odd"><td>successHandler.alwaysUseDefault</td><td><code>false</code></td><td>if <code>true</code>, always redirect to the value of <code>successHandler.defaultTargetUrl</code> after successful authentication, otherwise redirects to to originally-requested page</td></tr><tr class="table-even"><td>successHandler.targetUrlParameter</td><td>'spring-security-redirect'</td><td>name of optional login form parameter that specifies destination after successful login</td></tr><tr class="table-odd"><td>successHandler.useReferer</td><td><code>false</code></td><td>whether to use the HTTP <code>Referer</code> header to determine post-login destination</td></tr><tr class="table-even"><td>successHandler.ajaxSuccessUrl</td><td>'/login/ajaxSuccess'</td><td>URL to redirect to after successful Ajax login</td></tr><tr class="table-odd"><td>auth.loginFormUrl</td><td>'/login/auth'</td><td>URL of login page</td></tr><tr class="table-even"><td>auth.forceHttps</td><td><code>false</code></td><td>if <code>true</code>, will redirect login page requests to HTTPS</td></tr><tr class="table-odd"><td>auth.ajaxLoginFormUrl</td><td>'/login/authAjax'</td><td>URL of Ajax login page</td></tr><tr class="table-even"><td>auth.useForward</td><td>false</td><td>whether to render the login page (<code>true</code>) or redirect (<code>false</code>)</td></tr><tr class="table-odd"><td>logout.afterLogoutUrl</td><td>'/'</td><td>URL to redirect to after logout</td></tr><tr class="table-even"><td>logout.filterProcessesUrl</td><td>'/j_spring_security_logout'</td><td>logout URL, intercepted by Spring Security filter</td></tr><tr class="table-odd"><td>logout.handlerNames</td><td>'rememberMeServices', 'securityContextLogoutHandler'</td><td>logout handler bean names; more details are <a href="../guide/single.html#10.9. Logout Handlers" class="guide">here</a></td></tr><tr class="table-even"><td>adh.errorPage</td><td>'/login/denied'</td><td>location of the 403 error page</td></tr><tr class="table-odd"><td>adh.ajaxErrorPage</td><td>'/login/ajaxDenied'</td><td>location of the 403 error page for Ajax requests</td></tr><tr class="table-even"><td>ajaxHeader</td><td>'X-Requested-With'</td><td>header name sent by Ajax library, used to detect Ajax</td></tr><tr class="table-odd"><td>redirectStrategy.contextRelative</td><td><code>false</code></td><td>if <code>true</code>, the redirect URL will be the value after the request context path;  this will result in the loss of protocol information (HTTP or HTTPS), so will cause problems if a redirect is being performed to change from HTTP to HTTPS or vice versa</td></tr></table><p class="paragraph"/><h4>Channel security (declaring which URLs must use HTTPS or HTTP)</h4><p class="paragraph"/>More configuration details are <a href="../guide/single.html#10.7. Channel security" class="guide">here</a><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>portMapper.httpPort</td><td>8080</td><td>the HTTP port your app uses</td></tr><tr class="table-even"><td>portMapper.httpsPort</td><td>8443</td><td>the HTTPS port your app uses</td></tr><tr class="table-odd"><td>secureChannel.definition</td><td>none</td><td>Map of URL pattern to channel rule</td></tr></table><p class="paragraph"/><h4>IP address restrictions</h4><p class="paragraph"/>More configuration details are <a href="../guide/single.html#10.8. IP Address Restrictions" class="guide">here</a><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>ipRestrictions</td><td>none</td><td>a Map of URL patterns to IP address patterns</td></tr></table><p class="paragraph"/><h4>Password encryption attributes</h4><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td>password.algorithm</td><td>'SHA-256'</td><td>passwordEncoder Message Digest algorithm, see <a href="http://java.sun.com/j2se/1.5.0/docs/guide/security/CryptoSpec.html#AppA" target="blank">this page</a> for options</td></tr><tr class="table-even"><td>password.encodeHashAsBase64</td><td><code>false</code></td><td>if <code>true</code>, Base64-encode the hashed password</td></tr></table><p class="paragraph"/><h4>HTTP Basic Authentication</h4><p class="paragraph"/>More configuration details are <a href="../guide/single.html#10.2. Basic and Digest Auth" class="guide">here</a><p class="paragraph"/><h4>Digest Authentication</h4><p class="paragraph"/>More configuration details are <a href="../guide/single.html#10.2. Basic and Digest Auth" class="guide">here</a><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td>useBasicAuth</td><td><code>false</code></td><td>whether to use basic auth</td></tr><tr class="table-even"><td>basic.realmName</td><td>'Grails Realm'</td><td>the realm name displayed in the browser authentication popup</td></tr></table><p class="paragraph"/><h4>Switch User</h4><p class="paragraph"/>More configuration details are <a href="../guide/single.html#10.3. Switch User" class="guide">here</a><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>useSwitchUserFilter</td><td><code>false</code></td><td>whether to use the switch user filter</td></tr><tr class="table-even"><td>switchUser.switchUserUrl</td><td>'/j_spring_security_switch_user'</td><td>url to access (via GET or POST) to switch to another user</td></tr><tr class="table-odd"><td>switchUser.exitUserUrl</td><td>'/j_spring_security_exit_user'</td><td>url to access to switch to another user</td></tr><tr class="table-even"><td>switchUser.targetUrl</td><td>the same as <code>successHandler.defaultTargetUrl</code></td><td>the URL to redirect to after switching</td></tr><tr class="table-odd"><td>switchUser.switchFailureUrl</td><td>the same as <code>failureHandler.defaultFailureUrl</code></td><td>the URL to redirect to after an error attempting to switch</td></tr></table><p class="paragraph"/><h4>Session Fixation Prevention</h4><p class="paragraph"/>More configuration details are <a href="../guide/single.html#10.4. Session Fixation Prevention" class="guide">here</a><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th>&#160;</th></tr><tr class="table-odd"><td>useSessionFixationPrevention</td><td><code>false</code></td><td>whether to use session fixation prevention</td></tr><tr class="table-even"><td>sessionFixationPrevention.migrate</td><td><code>true</code></td><td>whether to copy the session attributes of the existing session to the new session after login</td></tr><tr class="table-odd"><td>sessionFixationPrevention.alwaysCreateSession</td><td><code>false</code></td><td>whether to always create a session even if one didn't exist at the start of the request</td></tr></table><p class="paragraph"/><h4>Certificate (X509) login</h4><p class="paragraph"/>More configuration details are <a href="../guide/single.html#10.6. Certificate (X509) login" class="guide">here</a><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>useX509</td><td><code>false</code></td><td>whether to support certificate-based logins</td></tr><tr class="table-even"><td>x509.continueFilterChainOnUnsuccessfulAuthentication</td><td><code>true</code></td><td>whether to proceed when an authentication attempt fails to allow other authentication mechanisms to process the request</td></tr><tr class="table-odd"><td>x509.subjectDnRegex</td><td>'CN=(.&#42;?),'</td><td>the regex for extracting the username from the certificate's subject name</td></tr><tr class="table-even"><td>x509.checkForPrincipalChanges</td><td><code>false</code></td><td>whether to re-extract the username from the certificate and check that it's still the current user when there's a valid <code>Authentication</code> already</td></tr><tr class="table-odd"><td>x509.invalidateSessionOnPrincipalChange</td><td><code>true</code></td><td>whether to invalidate the session if the principal changed (based on a <code>checkForPrincipalChanges</code> check)</td></tr></table><p class="paragraph"/><h4>Other miscellaneous attributes</h4><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>active</td><td><code>true</code></td><td>whether the plugin is enabled</td></tr><tr class="table-even"><td>rejectIfNoRule</td><td><code>false</code></td><td>'strict' mode where an explicit grant is required to access any resource; if <code>true</code> make sure to allow <code>IS_AUTHENTICATED_ANONYMOUSLY</code> for '/', '/js/&#42;&#42;', '/css/&#42;&#42;', '/images/&#42;&#42;', '/login/&#42;&#42;', '/logout/&#42;&#42;', etc.</td></tr><tr class="table-odd"><td>anon.key</td><td>'foo'</td><td>anonymousProcessingFilter key</td></tr><tr class="table-even"><td>anon.userAttribute</td><td>'anonymousUser, ROLE_ANONYMOUS'</td><td>anonymousProcessingFilter username and role</td></tr><tr class="table-odd"><td>atr.anonymousClass</td><td><a href="http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/authentication/AnonymousAuthenticationToken.html" target="blank">AnonymousAuthenticationToken</a></td><td>anonymous token class</td></tr><tr class="table-even"><td>useHttpSessionEventPublisher</td><td><code>false</code></td><td>if <code>true</code>, an <a href="http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/session/HttpSessionEventPublisher.html" target="blank">HttpSessionEventPublisher</a> will be configured</td></tr><tr class="table-odd"><td>cacheUsers</td><td><code>false</code></td><td>if <code>true</code>, logins are cached using an <code>EhCache</code></td></tr><tr class="table-even"><td>useSecurityEventListener</td><td><code>false</code></td><td>if <code>true</code>, configure <code>SecurityEventListener</code>; more details <a href="../guide/single.html#5. Events" class="guide">here</a></td></tr><tr class="table-odd"><td>dao.reflectionSaltSourceProperty</td><td>none</td><td>which property to use for the reflection-based salt source; more details <a href="../guide/single.html#10.5. Salted passwords" class="guide">here</a></td></tr><tr class="table-even"><td>requestCache.onlyOnGet</td><td><code>false</code></td><td>whether to only cache a <a href="http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/savedrequest/SavedRequest.html" target="blank">SavedRequest</a> on GET requests</td></tr><tr class="table-odd"><td>requestCache.createSession</td><td><code>true</code></td><td>whether caching <code>SavedRequest</code> can trigger the creation of a session</td></tr><tr class="table-even"><td>authenticationDetails.authClass</td><td><a href="http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/WebAuthenticationDetails.html" target="blank">WebAuthenticationDetails</a></td><td>the <code>Authentication</code> details class to use</td></tr><tr class="table-odd"><td>roleHierarchy</td><td>none</td><td>hierarchical role definition; more details <a href="../guide/single.html#10.12. Hierarchical Roles" class="guide">here</a></td></tr><tr class="table-even"><td>voterNames</td><td>'authenticatedVoter', 'roleVoter'</td><td>bean names of voters; more details <a href="../guide/single.html#10.10. Voters" class="guide">here</a></td></tr><tr class="table-odd"><td>providerNames</td><td>'daoAuthenticationProvider', 'anonymousAuthenticationProvider', 'rememberMeAuthenticationProvider'</td><td>bean names of authentication providers; more details <a href="../guide/single.html#10.11. Authentication Providers" class="guide">here</a></td></tr><tr class="table-even"><td>securityConfigType</td><td>type of request mapping to use</td><td>one of <code>SecurityConfigType.Annotation</code>, <code>SecurityConfigType.Requestmap</code>, or <code>SecurityConfigType.InterceptUrlMap</code>; more details <a href="../guide/single.html#3. Configuring Request Mappings to Secure URLs" class="guide">here</a></td></tr><tr class="table-odd"><td>controllerAnnotations.matcher</td><td>'ant'</td><td>whether to use an Ant-style URL matcher ('ant') or Regex ('regex')</td></tr><tr class="table-even"><td>controllerAnnotations.lowercase</td><td><code>true</code></td><td>whether to do URL comparisons using lowercase</td></tr><tr class="table-odd"><td>controllerAnnotations.staticRules</td><td>none</td><td>extra rules that cannot be mapped using annotations</td></tr><tr class="table-even"><td>interceptUrlMap</td><td>none</td><td>request mapping definition when using <code>SecurityConfigType.InterceptUrlMap</code>; more details <a href="../guide/single.html#3.2 Simple Map in Config.groovy" class="guide">here</a></td></tr><tr class="table-odd"><td>registerLoggerListener</td><td><code>false</code></td><td>if <code>true</code> registers a <a href="http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/access/event/LoggerListener.html" target="blank">LoggerListener</a> which logs interceptor-related application events</td></tr></table><p class="paragraph"/>
    
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker('UA-16219500-1');
pageTracker._trackPageview();
} catch(err) {}
</script>
</body>
</html>
