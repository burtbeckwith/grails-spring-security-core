<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>9.1 Basic and Digest Authentication</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    To use <a href="http://en.wikipedia.org/wiki/Basic_access_authentication" target="blank">HTTP Basic Authentication</a> in your application, set the <code>useBasicAuth</code> attribute to <code>true</code>. Also change the <code>basic.realmName</code> default value to one that suits your application, for example:<p class="paragraph"/><div class="code"><pre>grails.plugins.springsecurity.useBasicAuth = <span class="java&#45;keyword">true</span>
grails.plugins.springsecurity.basic.realmName = <span class="java&#45;quote">"Ralph's Bait and Tackle"</span></pre></div><p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default</strong></th><th><strong class="bold">Description</strong></th></tr><tr class="table-odd"><td>useBasicAuth</td><td><code>false</code></td><td>Whether to use basic authentication.</td></tr><tr class="table-even"><td>basic.realmName</td><td>'Grails Realm'</td><td>Realm name displayed in the browser authentication popup.</td></tr></table><p class="paragraph"/>With this authentication in place, users are prompted with the standard browser login dialog instead of being redirected to a login page.<p class="paragraph"/>If you don't want all of your URLs guarded by Basic Auth, you can partition the URL patterns and apply Basic Auth to some, but regular form login to others. For example, if you have a web service that uses Basic Auth for <code>/webservice/&#42;&#42;</code> URLs, you would configure that using the <code>chainMap</code> config attribute:<p class="paragraph"/><div class="code"><pre>grails.plugins.springsecurity.filterChain.chainMap = &#91;
   '/webservice/&#42;&#42;': 'JOINED_FILTERS,&#45;exceptionTranslationFilter',
   '/&#42;&#42;': 'JOINED_FILTERS,&#45;basicAuthenticationFilter,&#45;basicExceptionTranslationFilter'
&#93;</pre></div><p class="paragraph"/>In this example we're using the <code>JOINED_FILTERS</code> keyword instead of explicitly listing the filter names. Specifying <code>JOINED_FILTERS</code> means to use all of the filters that were configured using the various config options. In each case we also specify that we want to exclude one or more filters by prefixing their names with <code>-</code>.<p class="paragraph"/>For the <code>/webservice/&#42;&#42;</code> URLs, we want all filters except for the standard <code>ExceptionTranslationFilter</code> since we want to use just the one configured for Basic Auth. And for the <code>/&#42;&#42;</code> URLs (everything else) we want everything except for the Basic Auth filter and its configured <code>ExceptionTranslationFilter</code>.<p class="paragraph"/><a href="http://en.wikipedia.org/wiki/Digest_access_authentication" target="blank">Digest Authentication</a> is similar to Basic but is more secure because it does not send your password in obfuscated cleartext. Digest resembles Basic in practice - you get the same browser popup dialog when you authenticate. But because the credential transfer is genuinely encrypted (instead of just Base64-encoded as with Basic authentication) you do not need SSL to guard your logins.<p class="paragraph"/><table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">Property</strong></th><th><strong class="bold">Default Value</strong></th><th><strong class="bold">Meaning</strong></th></tr><tr class="table-odd"><td>useDigestAuth</td><td><code>false</code></td><td>Whether to use Digest authentication.</td></tr><tr class="table-even"><td>digest.realmName</td><td>'Grails Realm'</td><td>Realm name displayed in the browser popup</td></tr><tr class="table-odd"><td>digest.key</td><td>'changeme'</td><td>Key used to build the nonce for authentication; it should be changed but that's not required.</td></tr><tr class="table-even"><td>digest.nonceValiditySeconds</td><td>300</td><td>How long a nonce stays valid.</td></tr><tr class="table-odd"><td>digest.passwordAlreadyEncoded</td><td><code>false</code></td><td>Whether you are managing the password encryption yourself.</td></tr><tr class="table-even"><td>digest.createAuthenticatedToken</td><td><code>false</code></td><td>If <code>true</code>, creates an authenticated <code>UsernamePasswordAuthenticationToken</code> to avoid loading the user from the database twice. However, this process skips the isAccountNonExpired(), isAccountNonLocked(), isCredentialsNonExpired(), isEnabled() checks, so it is not advised.</td></tr><tr class="table-odd"><td>digest.useCleartextPasswords</td><td><code>false</code></td><td>If <code>true</code>, a cleartext password encoder is used (not recommended). If <code>false</code>, passwords encrypted by <code>DigestAuthPasswordEncoder</code> are stored in the database.</td></tr></table><p class="paragraph"/>Digest authentication has a problem in that by default you store cleartext passwords in your database. This is because the browser encrypts your password along with the username and Realm name, and this is compared to the password encrypted using the same algorithm during authentication. The browser does not know about your <code>MessageDigest</code> algorithm or salt source, so to encrypt them the same way you need to load a cleartext password from the database.<p class="paragraph"/>The plugin does provide an alternative, although it has no configuration options (in particular the digest algorithm cannot be changed). If <code>digest.useCleartextPasswords</code> is <code>false</code> (the default), then the <code>passwordEncoder</code> bean is replaced with an instance of <code>grails.plugins.springsecurity.DigestAuthPasswordEncoder</code>. This encoder uses the same approach as the browser, that is, it combines your password along with your username and Realm name essentially as a salt, and encrypts with MD5. MD5 is not recommended in general, but given the typical size of the salt it is reasonably safe to use.<p class="paragraph"/>The only required attribute is <code>useDigestAuth</code>, which you must set to <code>true</code>, but you probably also want to change the realm name:<p class="paragraph"/><div class="code"><pre>grails.plugins.springsecurity.useDigestAuth = <span class="java&#45;keyword">true</span>
grails.plugins.springsecurity.digest.realmName = <span class="java&#45;quote">"Ralph's Bait and Tackle"</span></pre></div><p class="paragraph"/>Digest authentication cannot be applied to a subset of URLs like Basic authentication can. This is due to the password encoding issues. So you cannot use the <code>chainMap</code> attribute here - all URLs will be guarded.

    
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16219500-1']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</body>
</html>
