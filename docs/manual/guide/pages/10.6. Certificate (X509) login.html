<html><head><meta content='text/html; charset=utf-8' http-equiv='Content-type'></meta><title>10.6. Certificate (X509) login</title><link title='Ref' charset='utf-8' rel='stylesheet' type='text/css' href='../css/main.css' media='screen'></link></head><body><body class='body'>
    Another authentication mechanism supported by Spring Security is certificate-based, or "mutual authentication". To use this you must use HTTPS and configure the server to require a client certificate (ordinarily only the server provides a certificate). Your username will be extracted from the client certificate if it's valid, and you'll be considered "pre-authenticated". As long as there is a corresponding user in the database with that username, your authentication will succeed and you won't be asked for a password, and the your <code>Authentication</code> will contain the authorities associated with your username.<p class='paragraph'></p>There are a few configuration options available for this feature:<p class='paragraph'></p><table cellpadding='0' class='wiki-table' border='0' cellspacing='0'><tr><th><strong class='bold'>Property</strong></th><th><strong class='bold'>Default Value</strong></th><th><strong class='bold'>Meaning</strong></th></tr><tr class='table-odd'><td>useX509</td><td><code>false</code></td><td>whether to support certificate-based logins</td></tr><tr class='table-even'><td>x509.continueFilterChainOnUnsuccessfulAuthentication</td><td><code>true</code></td><td>whether to proceed when an authentication attempt fails to allow other authentication mechanisms to process the request</td></tr><tr class='table-odd'><td>x509.subjectDnRegex</td><td>'CN=(.*?),'</td><td>the regex for extracting the username from the certificate's subject name</td></tr><tr class='table-even'><td>x509.checkForPrincipalChanges</td><td><code>false</code></td><td>whether to re-extract the username from the certificate and check that it's still the current user when there's a valid <code>Authentication</code> already</td></tr><tr class='table-odd'><td>x509.invalidateSessionOnPrincipalChange</td><td><code>true</code></td><td>whether to invalidate the session if the principal changed (based on a <code>checkForPrincipalChanges</code> check)</td></tr></table><p class='paragraph'></p>The details around configuring your server for SSL and configuring browser certificates are beyond the scope of this document, but if you're using Tomcat you should look at its <a target='blank' href='http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html'>SSL documentation</a>. Also, one quick way to get a test environment working is to use the instructions from <a target='blank' href='http://stackoverflow.com/questions/1180397/tomcat-server-client-self-signed-ssl-certificate'>this discussion at Stack Overflow</a>.

    
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16219500-1']);
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</body></html>